(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports = {
    PARTICLE_COUNT: 100,
    MIN_PARTICLE_DIAMETER: 30,
    MAX_PARTICLE_DIAMETER: 100,
    PARTICLE_DECELERATION: 0.92,
    FRAMES: 60,
    BASE_VELOCITY: 0.8,
};

},{}],2:[function(require,module,exports){
module.exports = function() {

    var cursorX = 0;
    var cursorY = 0;
    var previous_cursorX = 0;
    var previous_cursorY = 0;

    document.onmousemove = function(e){
        cursorX = e.pageX;
        cursorY = e.pageY;
    };

    function update_cursor() {
        previous_cursorX = cursorX;
        previous_cursorY = cursorY;
    }

    function movement() {
        return {
            x: previous_cursorX - cursorX,
            y: previous_cursorY - cursorY,
            pos_x: cursorX,
            pos_y: cursorY
        };
    }

    return {
        update_cursor: update_cursor,
        movement: movement
    };
};

},{}],3:[function(require,module,exports){
var CONSTANTS = require('./constants.js');
var mouse = require('./mouse-event')();
var Particle = require('./particle');

module.exports = function(canvas) {

    const { width, height } = canvas;
    const ctx = canvas.getContext("2d");

    function generateParticles() {
        const particles = new Array();
        for(var i = 0; i < CONSTANTS.PARTICLE_COUNT; i++) {
            particles.push(new Particle(width, height));
        }
        return particles;
    }

    function render(particles) {
        ctx.clearRect(0, 0, width, height);
        for(var i = 0; i < particles.length; i++) {
            var particle = particles[i];
            particle.update_opacity();
            particle.add_mouse_velocity(mouse.movement());
            particle.update_position();
            particle.draw(ctx);
        }
        mouse.update_cursor();
    }

    const particles = generateParticles();
    setInterval(function(){
        render(particles);
    }, 1000 / CONSTANTS.FRAMES);
};

},{"./constants.js":1,"./mouse-event":2,"./particle":4}],4:[function(require,module,exports){
var CONSTANTS = require('./constants.js');

module.exports = function(width, height) {
    this.width = width;
    this.height = height;

    var opacity =  Math.random() / 5;
    var opacity_increase = (Math.random() + 0.5) < 1 ? true : false;
    var minMaxDiameterDifference = CONSTANTS.MAX_PARTICLE_DIAMETER - CONSTANTS.MIN_PARTICLE_DIAMETER;
    var size = CONSTANTS.MIN_PARTICLE_DIAMETER + (Math.random() * minMaxDiameterDifference);
    var areaWidth = CONSTANTS.MAX_PARTICLE_DIAMETER * 2 + this.width;
    var areaHeight = CONSTANTS.MAX_PARTICLE_DIAMETER * 2 + this.height;
    var pos_x = (Math.random() * areaWidth) - CONSTANTS.MAX_PARTICLE_DIAMETER;
    var pos_y = (Math.random() * areaHeight) - CONSTANTS.MAX_PARTICLE_DIAMETER;
    var vel_x = (Math.random() - 0.5) * CONSTANTS.BASE_VELOCITY;
    var vel_y = (Math.random() - 0.5) * CONSTANTS.BASE_VELOCITY;
    var mouse_vel_x = 0;
    var mouse_vel_y = 0;

    function update_opacity() {
        opacity = opacity_increase ? opacity + 0.0005 : opacity - 0.0005;
        if (opacity < 0)
            opacity_increase = true;
        if (opacity > 0.2)
            opacity_increase = false;
    }

    function update_position() {
        var new_pos_x = pos_x + vel_x + mouse_vel_x;
        var new_pos_y = pos_y + vel_y + mouse_vel_y;
        mouse_vel_x *= CONSTANTS.PARTICLE_DECELERATION;
        mouse_vel_y *= CONSTANTS.PARTICLE_DECELERATION;
        pos_x = new_pos_x;
        pos_y = new_pos_y;
        validate_position();
    }

    function add_mouse_velocity(coords) {
        mouse_vel_x += coords.x / 400 / 80 * (size * 2);
        mouse_vel_y += coords.y / 400 / 80 * (size * 2);
        if (circle_hit_detection(pos_x, pos_y, coords.x, coords.y, size)) {
            var new_vel_x = coords.pos_x - pos_x;
            var new_vel_y = coords.pos_y - pos_y;
            mouse_vel_x -= new_vel_x / 20;
            mouse_vel_y -= new_vel_y / 20;
        }
    }

    function circle_hit_detection(center_x, center_y, pos_x, pos_y, size) {
        var dis_x = center_x - pos_x;
        var dis_y = center_y - pos_y;
        var distance = Math.sqrt(dis_x * dis_x + dis_y * dis_y);
        if (distance < (size / 2))
            return true;
        else
            return false;
    }

    function square_hit_detection(center_x, center_y, pos_x, pos_y, size) {
        var min_x = center_x - (size / 2);
        var max_x = center_x + (size / 2);
        var min_y = center_y - (size / 2);
        var max_y = center_y + (size / 2);
        if (pos_x > min_x && pos_x < max_x && pos_y > min_y && pos_y < max_y)
            return true;
        else
            return false;
    }

    function validate_position() {
        if (pos_x < - CONSTANTS.MAX_PARTICLE_DIAMETER)
            pos_x = this.width + CONSTANTS.MAX_PARTICLE_DIAMETER;
        else if (pos_x > (this.width + CONSTANTS.MAX_PARTICLE_DIAMETER))
            pos_x = - CONSTANTS.MAX_PARTICLE_DIAMETER;
        else if (pos_y < - CONSTANTS.MAX_PARTICLE_DIAMETER)
            pos_y = this.height + CONSTANTS.MAX_PARTICLE_DIAMETER;
        else if (pos_y > (this.height + CONSTANTS.MAX_PARTICLE_DIAMETER))
            pos_t = - CONSTANTS.MAX_PARTICLE_DIAMETER;
    }

    function draw(ctx) {
        ctx.beginPath();
        ctx.fillStyle = 'hsla(0, 100%, 100%,'+ opacity +')';
        ctx.arc(pos_x,pos_y,size, 0, Math.PI * 2);
        ctx.fill();
    }

    return {
        opacity: opacity,
        pos_x: pos_x,
        pos_y: pos_y,
        size: size,
        update_opacity: update_opacity,
        update_position: update_position,
        add_mouse_velocity: add_mouse_velocity,
        draw: draw
    };
};

},{"./constants.js":1}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvZWxsaW90dC9wcm9qZWN0cy9wYXJ0aWNsZS1iYWNrZ3JvdW5kL3NjcmlwdHMvY29uc3RhbnRzLmpzIiwiL1VzZXJzL2VsbGlvdHQvcHJvamVjdHMvcGFydGljbGUtYmFja2dyb3VuZC9zY3JpcHRzL21vdXNlLWV2ZW50LmpzIiwiL1VzZXJzL2VsbGlvdHQvcHJvamVjdHMvcGFydGljbGUtYmFja2dyb3VuZC9zY3JpcHRzL3BhcnRpY2xlLWVuZ2luZS5qcyIsIi9Vc2Vycy9lbGxpb3R0L3Byb2plY3RzL3BhcnRpY2xlLWJhY2tncm91bmQvc2NyaXB0cy9wYXJ0aWNsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLE1BQU0sQ0FBQyxPQUFPLEdBQUc7SUFDYixjQUFjLEVBQUUsR0FBRztJQUNuQixxQkFBcUIsRUFBRSxFQUFFO0lBQ3pCLHFCQUFxQixFQUFFLEdBQUc7SUFDMUIscUJBQXFCLEVBQUUsSUFBSTtJQUMzQixNQUFNLEVBQUUsRUFBRTtJQUNWLGFBQWEsRUFBRSxHQUFHO0NBQ3JCLENBQUM7OztBQ1BGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsV0FBVzs7SUFFeEIsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDO0lBQ2hCLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQztJQUNoQixJQUFJLGdCQUFnQixHQUFHLENBQUMsQ0FBQztBQUM3QixJQUFJLElBQUksZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDOztJQUV6QixRQUFRLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQyxDQUFDO1FBQzlCLE9BQU8sR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQ2xCLE9BQU8sR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDO0FBQzFCLEtBQUssQ0FBQzs7SUFFRixTQUFTLGFBQWEsR0FBRztRQUNyQixnQkFBZ0IsR0FBRyxPQUFPLENBQUM7UUFDM0IsZ0JBQWdCLEdBQUcsT0FB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QUNyRCxJQUFJLEtBQUssSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxxQkFBcUIsQ0FBQztZQUM1RCxLQUFLLEdBQUcsRUFBRSxTQUFTLENBQUMscUJBQXFCLENBQUM7QUFDdEQsS0FBSzs7SUFFRCxTQUFTLElBQUksQ0FBQyxHQUFHLEVBQUU7UUFDZixHQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDaEIsR0FBRyxDQUFDLFNBQVMsR0FBRyxxQkFBcUIsRUFBRSxPQUFPLEVBQUUsR0FBRyxDQUFDO1FBQ3BELEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDMUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25CLEtBQUs7O0lBRUQsT0FBTztRQUNILE9BQU8sRUFBRSxPQUFPO1FBQ2hCLEtBQUssRUFBRSxLQUFLO1FBQ1osS0FBSyxFQUFFLEtBQUs7UUFDWixJQUFJLEVBQUUsSUFBSTtRQUNWLGNBQWMsRUFBRSxjQUFjO1FBQzlCLGVBQWUsRUFBRSxlQUFlO1FBQ2hDLGtCQUFrQixFQUFFLGtCQUFrQjtRQUN0QyxJQUFJLEVBQUUsSUFBSTtLQUNiLENBQUM7Q0FDTCxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIm1vZHVsZS5leHBvcnRzID0ge1xuICAgIFBBUlRJQ0xFX0NPVU5UOiAxMDAsXG4gICAgTUlOX1BBUlRJQ0xFX0RJQU1FVEVSOiAzMCxcbiAgICBNQVhfUEFSVElDTEVfRElBTUVURVI6IDEwMCxcbiAgICBQQVJUSUNMRV9ERUNFTEVSQVRJT046IDAuOTIsXG4gICAgRlJBTUVTOiA2MCxcbiAgICBCQVNFX1ZFTE9DSVRZOiAwLjgsXG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblxuICAgIHZhciBjdXJzb3JYID0gMDtcbiAgICB2YXIgY3Vyc29yWSA9IDA7XG4gICAgdmFyIHByZXZpb3VzX2N1cnNvclggPSAwO1xuICAgIHZhciBwcmV2aW91c19jdXJzb3JZID0gMDtcblxuICAgIGRvY3VtZW50Lm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24oZSl7XG4gICAgICAgIGN1cnNvclggPSBlLnBhZ2VYO1xuICAgICAgICBjdXJzb3JZID0gZS5wYWdlWTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlX2N1cnNvcigpIHtcbiAgICAgICAgcHJldmlvdXNfY3Vyc29yWCA9IGN1cnNvclg7XG4gICAgICAgIHByZXZpb3VzX2N1cnNvclkgPSBjdXJzb3JZO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vdmVtZW50KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogcHJldmlvdXNfY3Vyc29yWCAtIGN1cnNvclgsXG4gICAgICAgICAgICB5OiBwcmV2aW91c19jdXJzb3JZIC0gY3Vyc29yWSxcbiAgICAgICAgICAgIHBvc194OiBjdXJzb3JYLFxuICAgICAgICAgICAgcG9zX3k6IGN1cnNvcllcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB1cGRhdGVfY3Vyc29yOiB1cGRhdGVfY3Vyc29yLFxuICAgICAgICBtb3ZlbWVudDogbW92ZW1lbnRcbiAgICB9O1xufTtcbiIsInZhciBDT05TVEFOVFMgPSByZXF1aXJlKCcuL2NvbnN0YW50cy5qcycpO1xudmFyIG1vdXNlID0gcmVxdWlyZSgnLi9tb3VzZS1ldmVudCcpKCk7XG52YXIgUGFydGljbGUgPSByZXF1aXJlKCcuL3BhcnRpY2xlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oY2FudmFzKSB7XG5cbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGNhbnZhcztcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVQYXJ0aWNsZXMoKSB7XG4gICAgICAgIGNvbnN0IHBhcnRpY2xlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgQ09OU1RBTlRTLlBBUlRJQ0xFX0NPVU5UOyBpKyspIHtcbiAgICAgICAgICAgIHBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZSh3aWR0aCwgaGVpZ2h0KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnRpY2xlcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXIocGFydGljbGVzKSB7XG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBwYXJ0aWNsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwYXJ0aWNsZSA9IHBhcnRpY2xlc1tpXTtcbiAgICAgICAgICAgIHBhcnRpY2xlLnVwZGF0ZV9vcGFjaXR5KCk7XG4gICAgICAgICAgICBwYXJ0aWNsZS5hZGRfbW91c2VfdmVsb2NpdHkobW91c2UubW92ZW1lbnQoKSk7XG4gICAgICAgICAgICBwYXJ0aWNsZS51cGRhdGVfcG9zaXRpb24oKTtcbiAgICAgICAgICAgIHBhcnRpY2xlLmRyYXcoY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBtb3VzZS51cGRhdGVfY3Vyc29yKCk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljbGVzID0gZ2VuZXJhdGVQYXJ0aWNsZXMoKTtcbiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICByZW5kZXIocGFydGljbGVzKTtcbiAgICB9LCAxMDAwIC8gQ09OU1RBTlRTLkZSQU1FUyk7XG59O1xuIiwidmFyIENPTlNUQU5UUyA9IHJlcXVpcmUoJy4vY29uc3RhbnRzLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCkge1xuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcblxuICAgIHZhciBvcGFjaXR5ID0gIE1hdGgucmFuZG9tKCkgLyA1O1xuICAgIHZhciBvcGFjaXR5X2luY3JlYXNlID0gKE1hdGgucmFuZG9tKCkgKyAwLjUpIDwgMSA/IHRydWUgOiBmYWxzZTtcbiAgICB2YXIgbWluTWF4RGlhbWV0ZXJEaWZmZXJlbmNlID0gQ09OU1RBTlRTLk1BWF9QQVJUSUNMRV9ESUFNRVRFUiAtIENPTlNUQU5UUy5NSU5fUEFSVElDTEVfRElBTUVURVI7XG4gICAgdmFyIHNpemUgPSBDT05TVEFOVFMuTUlOX1BBUlRJQ0xFX0RJQU1FVEVSICsgKE1hdGgucmFuZG9tKCkgKiBtaW5NYXhEaWFtZXRlckRpZmZlcmVuY2UpO1xuICAgIHZhciBhcmVhV2lkdGggPSBDT05TVEFOVFMuTUFYX1BBUlRJQ0xFX0RJQU1FVEVSICogMiArIHRoaXMud2lkdGg7XG4gICAgdmFyIGFyZWFIZWlnaHQgPSBDT05TVEFOVFMuTUFYX1BBUlRJQ0xFX0RJQU1FVEVSICogMiArIHRoaXMuaGVpZ2h0O1xuICAgIHZhciBwb3NfeCA9IChNYXRoLnJhbmRvbSgpICogYXJlYVdpZHRoKSAtIENPTlNUQU5UUy5NQVhfUEFSVElDTEVfRElBTUVURVI7XG4gICAgdmFyIHBvc195ID0gKE1hdGgucmFuZG9tKCkgKiBhcmVhSGVpZ2h0KSAtIENPTlNUQU5UUy5NQVhfUEFSVElDTEVfRElBTUVURVI7XG4gICAgdmFyIHZlbF94ID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogQ09OU1RBTlRTLkJBU0VfVkVMT0NJVFk7XG4gICAgdmFyIHZlbF95ID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogQ09OU1RBTlRTLkJBU0VfVkVMT0NJVFk7XG4gICAgdmFyIG1vdXNlX3ZlbF94ID0gMDtcbiAgICB2YXIgbW91c2VfdmVsX3kgPSAwO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlX29wYWNpdHkoKSB7XG4gICAgICAgIG9wYWNpdHkgPSBvcGFjaXR5X2luY3JlYXNlID8gb3BhY2l0eSArIDAuMDAwNSA6IG9wYWNpdHkgLSAwLjAwMDU7XG4gICAgICAgIGlmIChvcGFjaXR5IDwgMClcbiAgICAgICAgICAgIG9wYWNpdHlfaW5jcmVhc2UgPSB0cnVlO1xuICAgICAgICBpZiAob3BhY2l0eSA+IDAuMilcbiAgICAgICAgICAgIG9wYWNpdHlfaW5jcmVhc2UgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVfcG9zaXRpb24oKSB7XG4gICAgICAgIHZhciBuZXdfcG9zX3ggPSBwb3NfeCArIHZlbF94ICsgbW91c2VfdmVsX3g7XG4gICAgICAgIHZhciBuZXdfcG9zX3kgPSBwb3NfeSArIHZlbF95ICsgbW91c2VfdmVsX3k7XG4gICAgICAgIG1vdXNlX3ZlbF94ICo9IENPTlNUQU5UUy5QQVJUSUNMRV9ERUNFTEVSQVRJT047XG4gICAgICAgIG1vdXNlX3ZlbF95ICo9IENPTlNUQU5UUy5QQVJUSUNMRV9ERUNFTEVSQVRJT047XG4gICAgICAgIHBvc194ID0gbmV3X3Bvc194O1xuICAgICAgICBwb3NfeSA9IG5ld19wb3NfeTtcbiAgICAgICAgdmFsaWRhdGVfcG9zaXRpb24oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRfbW91c2VfdmVsb2NpdHkoY29vcmRzKSB7XG4gICAgICAgIG1vdXNlX3ZlbF94ICs9IGNvb3Jkcy54IC8gNDAwIC8gODAgKiAoc2l6ZSAqIDIpO1xuICAgICAgICBtb3VzZV92ZWxfeSArPSBjb29yZHMueSAvIDQwMCAvIDgwICogKHNpemUgKiAyKTtcbiAgICAgICAgaWYgKGNpcmNsZV9oaXRfZGV0ZWN0aW9uKHBvc194LCBwb3NfeSwgY29vcmRzLngsIGNvb3Jkcy55LCBzaXplKSkge1xuICAgICAgICAgICAgdmFyIG5ld192ZWxfeCA9IGNvb3Jkcy5wb3NfeCAtIHBvc194O1xuICAgICAgICAgICAgdmFyIG5ld192ZWxfeSA9IGNvb3Jkcy5wb3NfeSAtIHBvc195O1xuICAgICAgICAgICAgbW91c2VfdmVsX3ggLT0gbmV3X3ZlbF94IC8gMjA7XG4gICAgICAgICAgICBtb3VzZV92ZWxfeSAtPSBuZXdfdmVsX3kgLyAyMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNpcmNsZV9oaXRfZGV0ZWN0aW9uKGNlbnRlcl94LCBjZW50ZXJfeSwgcG9zX3gsIHBvc195LCBzaXplKSB7XG4gICAgICAgIHZhciBkaXNfeCA9IGNlbnRlcl94IC0gcG9zX3g7XG4gICAgICAgIHZhciBkaXNfeSA9IGNlbnRlcl95IC0gcG9zX3k7XG4gICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChkaXNfeCAqIGRpc194ICsgZGlzX3kgKiBkaXNfeSk7XG4gICAgICAgIGlmIChkaXN0YW5jZSA8IChzaXplIC8gMikpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNxdWFyZV9oaXRfZGV0ZWN0aW9uKGNlbnRlcl94LCBjZW50ZXJfeSwgcG9zX3gsIHBvc195LCBzaXplKSB7XG4gICAgICAgIHZhciBtaW5feCA9IGNlbnRlcl94IC0gKHNpemUgLyAyKTtcbiAgICAgICAgdmFyIG1heF94ID0gY2VudGVyX3ggKyAoc2l6ZSAvIDIpO1xuICAgICAgICB2YXIgbWluX3kgPSBjZW50ZXJfeSAtIChzaXplIC8gMik7XG4gICAgICAgIHZhciBtYXhfeSA9IGNlbnRlcl95ICsgKHNpemUgLyAyKTtcbiAgICAgICAgaWYgKHBvc194ID4gbWluX3ggJiYgcG9zX3ggPCBtYXhfeCAmJiBwb3NfeSA+IG1pbl95ICYmIHBvc195IDwgbWF4X3kpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlX3Bvc2l0aW9uKCkge1xuICAgICAgICBpZiAocG9zX3ggPCAtIENPTlNUQU5UUy5NQVhfUEFSVElDTEVfRElBTUVURVIpXG4gICAgICAgICAgICBwb3NfeCA9IHRoaXMud2lkdGggKyBDT05TVEFOVFMuTUFYX1BBUlRJQ0xFX0RJQU1FVEVSO1xuICAgICAgICBlbHNlIGlmIChwb3NfeCA+ICh0aGlzLndpZHRoICsgQ09OU1RBTlRTLk1BWF9QQVJUSUNMRV9ESUFNRVRFUikpXG4gICAgICAgICAgICBwb3NfeCA9IC0gQ09OU1RBTlRTLk1BWF9QQVJUSUNMRV9ESUFNRVRFUjtcbiAgICAgICAgZWxzZSBpZiAocG9zX3kgPCAtIENPTlNUQU5UUy5NQVhfUEFSVElDTEVfRElBTUVURVIpXG4gICAgICAgICAgICBwb3NfeSA9IHRoaXMuaGVpZ2h0ICsgQ09OU1RBTlRTLk1BWF9QQVJUSUNMRV9ESUFNRVRFUjtcbiAgICAgICAgZWxzZSBpZiAocG9zX3kgPiAodGhpcy5oZWlnaHQgKyBDT05TVEFOVFMuTUFYX1BBUlRJQ0xFX0RJQU1FVEVSKSlcbiAgICAgICAgICAgIHBvc190ID0gLSBDT05TVEFOVFMuTUFYX1BBUlRJQ0xFX0RJQU1FVEVSO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRyYXcoY3R4KSB7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdoc2xhKDAsIDEwMCUsIDEwMCUsJysgb3BhY2l0eSArJyknO1xuICAgICAgICBjdHguYXJjKHBvc194LHBvc195LHNpemUsIDAsIE1hdGguUEkgKiAyKTtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBvcGFjaXR5OiBvcGFjaXR5LFxuICAgICAgICBwb3NfeDogcG9zX3gsXG4gICAgICAgIHBvc195OiBwb3NfeSxcbiAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgdXBkYXRlX29wYWNpdHk6IHVwZGF0ZV9vcGFjaXR5LFxuICAgICAgICB1cGRhdGVfcG9zaXRpb246IHVwZGF0ZV9wb3NpdGlvbixcbiAgICAgICAgYWRkX21vdXNlX3ZlbG9jaXR5OiBhZGRfbW91c2VfdmVsb2NpdHksXG4gICAgICAgIGRyYXc6IGRyYXdcbiAgICB9O1xufTtcbiJdfQ==
